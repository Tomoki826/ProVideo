{% extends "layout.html" %}

{% block title %}
検索
{% endblock %}

{% block content %}

<!--ナビゲーションバー-->
{% with data = data %}
{% include "navbar.html" %}
{% endwith %}

<!--検索ボックス-->
{% with data = data %}
{% include "searchform.html" %}
{% endwith %}

<!--コンテンツ部分-->
<main>
<div id="search_title">
    <!--検索結果-->
    {% if data['total_results'] <= 0 %}
        「{{ data['keywords'] }}」の検索結果 なし
    {% else %}
        {% with value = data['current_page'] * 20 %}
            {% if data['total_results'] <= 20 %}
                「{{ data['keywords'] }}」の検索結果 (全{{ data['total_results'] }}件)
            {% elif data['total_results'] < value %}
                「{{ data['keywords'] }}」の検索結果 (全{{ data['total_results'] }}件  {{ data['current_page'] * 20 - 19 }}~{{ data['total_results'] }}件目)
            {% else %}
                「{{ data['keywords'] }}」の検索結果 (全{{ data['total_results'] }}件  {{ data['current_page'] * 20 - 19 }}~{{ data['current_page'] * 20 }}件目)
            {% endif %}
        {% endwith %}
    {% endif %}
</div>

<!--ページ送り-->
{% with data = data %}
{% include "pagemove.html" %}
{% endwith %}

<!--映像・人物情報-->
<div id="contents_container">
    {% for item in data['results'] %}
    <div class="videos_container">
        {% if item['data_type'] == 'person' %}
            <div class="leftside">
                <div class="poster">
                    <img src="https://www.themoviedb.org/t/p/w500{{item['poster_path']}}" alt="{{item['title']}}" oncontextmenu="return false;"/>
                </div>
                <div class="favorite">
                    <img class="unliked" src="../static/images/heart_black.png" alt="お気に入り" />
                    <div class="heading">お気に入り</div>
                </div>
            </div>
            <div class="description">
                <div class="name">
                    <div class="type">{{item['media_type']}}</div>
                    <div class="ajax_name" value="unloaded,{{item['id']}}">{{item['title']}}</div>
                </div>
                <div class="details">{{item['department']}}<br/>{{item['gender']}}</div>
                <div class="products">
                    <div class="heading">{{item['known_videos']}}</div>
                    <div class="videos">
                        {% for item2 in item['known_for'] %}
                            <img src="https://www.themoviedb.org/t/p/w500{{item2['poster_path']}}" alt="{{item2['title']}}" oncontextmenu="return false;"/>
                        {% endfor %}
                    </div>
                </div>
            </div>
        {% else %}
            <div class="leftside">
                <div class="poster">
                    <img src="https://www.themoviedb.org/t/p/w500{{item['poster_path']}}" alt="{{item['title']}}" oncontextmenu="return false;"/>
                </div>
                <div class="favorite">
                    <img class="unliked" src="../static/images/heart_black.png" alt="お気に入り" />
                    <div class="heading">お気に入り</div>
                </div>
            </div>
            <div class="description">
                <div class="name">
                    <div class="type">{{item['media_type']}}</div>
                    <div class="title">{{item['title']}}</div>
                </div>
                <div class="details">{{item['openday']}}<br/>{{item['genre']}}</div>
                <div class="ajax_providers" value="unloaded,{{item['id']}},{{item['data_type']}}">
                    <div class="subscription">
                        <div class="heading">サブスクリプション</div>
                        <div class="icons"></div>
                    </div>
                    <div class="rental">
                        <div class="heading">レンタル可能</div>
                        <div class="icons"></div>
                    </div>
                    <div class="buy">
                        <div class="heading">購入可能</div>
                        <div class="icons"></div>
                    </div>
                </div>
            </div>
        {% endif %}
    </div>
    {% endfor %}
</div>

<p>{{ data }}</p>
<p>{{ soup }}</p>

</main>

<!--フッター-->
<footer id="foot_page">
    <!--ページ送り-->
    {% with data = data %}
    {% include "pagemove.html" %}
    {% endwith %}
</footer>

{% endblock %}